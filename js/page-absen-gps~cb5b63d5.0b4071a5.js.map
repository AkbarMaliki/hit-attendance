{"version":3,"sources":["webpack:///./src/pages/absen/gps.vue?7ec5","webpack:///src/pages/absen/gps.vue","webpack:///./src/pages/absen/gps.vue?47fa","webpack:///./src/pages/absen/gps.vue"],"names":["maps","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","attrs","on","$event","$router","go","_s","users","data","location","_e","push","$route","query","lat","long","staticRenderFns","isInside","methods","loadMap","L","Map","setView","latitude","tileLayer","appendLocation","position","verb","coords","longitude","accuracy","console","log","that","user","marker","d","distance","_latlng","circle","getLatLng","getRadius","setStyle","$forceUpdate","navigator","mounted","setTimeout","sdb","alert","clearInterval","$store","state","qrscanInterval","component"],"mappings":"gIAAA,IC0BIA,ED1BAC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,IAAI,CAACE,YAAY,+CAA+C,CAACN,EAAIO,GAAG,kBAAkBH,EAAG,SAAS,CAACE,YAAY,uDAAuDE,YAAY,CAAC,OAAS,mBAAmBC,MAAM,CAAC,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOX,EAAIY,QAAQC,IAAI,MAAM,CAACT,EAAG,OAAO,CAACE,YAAY,+BAA+BF,EAAG,KAAK,CAACE,YAAY,SAASF,EAAG,MAAM,CAACI,YAAY,CAAC,OAAS,OAAO,MAAQ,OAAO,WAAa,SAASC,MAAM,CAAC,GAAK,WAAWL,EAAG,MAAM,CAAEJ,EAAS,MAAEI,EAAG,IAAI,CAACE,YAAY,qBAAqB,CAACN,EAAIO,GAAG,aAAaP,EAAIc,GAAGd,EAAIe,MAAMC,KAAKC,UAAU,OAAOjB,EAAIkB,KAAKd,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAAEN,EAAY,SAAEI,EAAG,SAAS,CAACE,YAAY,+CAA+CG,MAAM,CAAC,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOX,EAAIY,QAAQO,KAAM,sBAAyBnB,EAAIoB,OAAOC,MAAU,KAAI,WAAcrB,EAAIoB,OAAOC,MAAY,OAAI,QAAUrB,EAAIsB,IAAM,SAAWtB,EAAIuB,SAAU,CAACvB,EAAIO,GAAG,YAAYP,EAAIkB,YACpmCM,EAAkB,G,kCCwBtB,mBAGA,GACER,KADF,WAEI,MAAO,CACLS,UAAN,EACMH,IAAN,GACMC,KAAN,GACMR,OAAN,IAGEW,QAAS,CACPC,QADJ,WAEM,IAAN,OAEM7B,EAAO,IAAI8B,EAAEC,IAAI,SACjB/B,EAAKgC,QAAQ,CAAC7B,KAAKmB,OAAOC,MAAMU,SAAtC,iCAEMH,EAAEI,UAAU,oDAAlB,CACQ,QAAR,GACQ,WAAR,4BACA,SAEM,IAAN,qEAEQ,MAAR,MACQ,UAAR,OACQ,YAAR,GACQ,OAAR,MACA,SASM,SAASC,EAAeC,EAAUC,GAChC,IAAIJ,EAAWG,EAASE,OAAOL,SAC3BM,EAAYH,EAASE,OAAOC,UACjBH,EAASE,OAAOE,SAC/BC,QAAQC,IAAI,MAApB,GACQD,QAAQC,IAAI,OAApB,GACQC,EAAKnB,IAAb,EACQmB,EAAR,UACQ,IAAIC,EAAO,IAAId,EAAEe,OAAO,CAACZ,EAAjC,IAEU,WAAV,EACU,SAAV,IACA,SACYa,EAAI9C,EAAK+C,SAASH,EAAKI,QAASC,EAAOC,aACvCvB,EAAWmB,EAAIG,EAAOE,YAC1BR,EAAKhB,SAAb,EACQsB,EAAOG,SAAS,CACd,UAAV,mBAEQT,EAAKU,eA3BH,gBAAiBC,WACnB,UAAR,4CACU,EAAV,gBAEA,wCAEQ,EAAR,0CA0BEC,QA5DF,WA6DIC,YAAW,WACTC,EAAIC,MAAM,4CAAhB,kBACA,KACIC,cAAcxD,KAAKyD,OAAOC,MAAMC,gBAChC3D,KAAK0B,UACL1B,KAAKc,MAAT,gDACId,KAAKkD,eACT,+BAEM,KAAN,oBClG4V,I,YCOxVU,EAAY,eACd,EACA9D,EACAyB,GACA,EACA,KACA,KACA,MAIa,aAAAqC,E","file":"js/page-absen-gps~cb5b63d5.0b4071a5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"py-4 px-2 shadow\"},[_c('p',{staticClass:\"mt-1 font-semibold text-lg float-right mr-3\"},[_vm._v(\"GPS Location\")]),_c('button',{staticClass:\"btn btn-sm btn-dark-outline ml-2 rounded-circle px-2\",staticStyle:{\"border\":\"1px solid black\"},attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('span',{staticClass:\"typcn typcn-arrow-left\"})])]),_c('hr',{staticClass:\"my-2\"}),_c('div',{staticStyle:{\"height\":\"50vh\",\"width\":\"100%\",\"background\":\"white\"},attrs:{\"id\":\"mapid\"}}),_c('div',[(_vm.users)?_c('p',{staticClass:\"font-semibold p-3\"},[_vm._v(\" Location \"+_vm._s(_vm.users.data.location)+\" \")]):_vm._e(),_c('div',{staticClass:\"text-center p-4\"},[(_vm.isInside)?_c('button',{staticClass:\"btn btn-sm btn-style4 btn-block text-xl mt-4\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$router.push((\"/absen/selfie?type=\" + (_vm.$route.query.type) + \"&target=\" + (_vm.$route.query.target) + \"&lat=\" + _vm.lat + \"&long=\" + _vm.long))}}},[_vm._v(\"Lanjut\")]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"py-4 px-2 shadow\">\r\n        <p class=\"mt-1 font-semibold text-lg float-right mr-3\">GPS Location</p>\r\n        <button @click=\"$router.go(-1)\" type=\"button\"  class=\"btn btn-sm btn-dark-outline ml-2 rounded-circle px-2\" style=\"border:1px solid black;\">\r\n            <span class=\"typcn typcn-arrow-left\"></span>\r\n        </button>\r\n    </div>\r\n    <hr class=\"my-2\">\r\n     <div id=\"mapid\" style=\"height:50vh;width:100%;background:white;\"></div>\r\n     <div>\r\n      <p class=\"font-semibold p-3\" v-if=\"users\">\r\n       Location {{users.data.location}}\r\n      </p>\r\n      <div class=\"text-center p-4\">\r\n        <button type=\"button\" class=\"btn btn-sm btn-style4 btn-block text-xl mt-4\" \r\n        v-if=\"isInside\"\r\n        @click=\"$router.push(`/absen/selfie?type=${$route.query.type}&target=${$route.query.target}&lat=${lat}&long=${long}`)\">Lanjut</button>\r\n      </div>\r\n     </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nimport autophp from '@/plugins/auto';\r\nlet sdb = new autophp('ci');\r\nvar maps;\r\nvar watchId;\r\nexport default {\r\n  data() {\r\n    return {\r\n      isInside:false,\r\n      lat:'',\r\n      long:'',\r\n      users:false\r\n    }\r\n  },\r\n  methods: {\r\n    loadMap(){\r\n      let that=this;\r\n      // var center = JSON.parse(this.$route.query.gps); // \r\n      maps = new L.Map('mapid');\r\n      maps.setView([this.$route.query.latitude,this.$route.query.longitude], 18);\r\n      // maps.setView([center.lat,center.long], 18);\r\n      L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{\r\n          maxZoom: 20,\r\n          subdomains:['mt0','mt1','mt2','mt3']\r\n      }).addTo(maps);\r\n      //  L.circle(, 100).addTo(maps);\r\n       var circle = L.circle([this.$route.query.latitude,this.$route.query.longitude], {\r\n      //  var circle = L.circle([center.lat,center.long], {\r\n          color: 'red',\r\n          fillColor: '#f03',\r\n          fillOpacity: 0.5,\r\n          radius: 100\r\n      }).addTo(maps);\r\n      if (\"geolocation\" in navigator) {\r\n            navigator.geolocation.getCurrentPosition(function (location) {\r\n                appendLocation(location, \"fetched\");\r\n            });\r\n            watchId = navigator.geolocation.watchPosition(appendLocation);\r\n        } else {\r\n            sdb.alert(\"Geolocation API not supported.\");\r\n        }\r\n      function appendLocation(position, verb) {\r\n        var latitude = position.coords.latitude;\r\n        var longitude = position.coords.longitude;\r\n        var accuracy = position.coords.accuracy;\r\n        console.log('lat',latitude)\r\n        console.log('long',longitude)\r\n        that.lat=latitude\r\n        that.long=longitude\r\n        var user = new L.marker([latitude,longitude],{\r\n        // var user = new L.marker([-3.447172, 114.771320],{\r\n            draggable: false,\r\n            autoPan: true\r\n        }).addTo(maps);\r\n        var d = maps.distance(user._latlng, circle.getLatLng());\r\n        var isInside = d < circle.getRadius();\r\n        that.isInside=isInside;\r\n        circle.setStyle({\r\n            fillColor: isInside ? 'green' : '#f03'\r\n        })\r\n        that.$forceUpdate();\r\n      }\r\n        \r\n    }\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      sdb.alert('Tunggu untuk mendapatkan Pin lokasi anda!','bg-green-400')\r\n    }, 1000);\r\n    clearInterval(this.$store.state.qrscanInterval);\r\n    this.loadMap();\r\n    this.users=JSON.parse(localStorage.getItem('absenStatus'))\r\n    this.$forceUpdate();\r\n     if(localStorage.getItem('users')){\r\n        }else{\r\n            this.$router.push('/')\r\n        }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gps.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gps.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./gps.vue?vue&type=template&id=cc42264c&\"\nimport script from \"./gps.vue?vue&type=script&lang=js&\"\nexport * from \"./gps.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}