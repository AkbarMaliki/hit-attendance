(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-absen-index~31ecd969"],{ae28:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"py-4 px-2 shadow"},[n("p",{staticClass:"mt-1 font-semibold text-lg float-right mr-3"},[e._v("QR Scanner")]),n("button",{staticClass:"btn btn-sm btn-dark-outline ml-2 rounded-circle px-2",staticStyle:{border:"1px solid black"},attrs:{type:"button"},on:{click:function(t){return e.$router.go(-1)}}},[n("span",{staticClass:"typcn typcn-arrow-left"})])]),e._m(0)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("br"),n("br"),n("br"),n("div",{staticClass:"mt-12",staticStyle:{height:"350px",width:"100vw"},attrs:{id:"reader"}})])}];n("99af"),n("4795"),n("2b3d"),n("d3b7"),n("3ca3"),n("ddb0"),n("c0b6");class r{constructor(e,t,n,i,a){this._legacyCanvasSize=r.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),n&&"object"===typeof n?this._onDecode=t:(n||i||a?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t="object"===typeof n?n:{},this._onDecodeError=t.onDecodeError||("function"===typeof n?n:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||("function"===typeof i?i:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||a||this._preferredCamera,this._legacyCanvasSize="number"===typeof n?n:"number"===typeof i?i:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let o=!1;if(e.hidden&&(e.hidden=!1,o=!0),document.body.contains(e)||(document.body.appendChild(e),o=!0),n=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(i=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),a=this.$overlay.style,a.position="absolute",a.display="none",a.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(s){}n.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let t=window.getComputedStyle(e);"none"===t.display&&(e.style.setProperty("display","block","important"),o=!0),"visible"!==t.visibility&&(e.style.setProperty("visibility","visible","important"),o=!0),o&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=r.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await r.listCameras(!1)).length}catch(e){return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t,n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);try{e&&(await n()).every(e=>!e.label)&&(t=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(i){}try{return(await n()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":"Camera "+(t+1))}))}finally{t&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),r._stopVideoStream(t))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(t){return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),r._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),r._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?r._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(r._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(t(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,n,i,a=!1,o=!1){let s,c=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(s=t.scanRegion,n=t.qrEngine,i=t.canvas,a=t.disallowCanvasResizing||!1,o=t.alsoTryWithoutScanRegion||!1,c=!0):t||n||i||a||o?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!n;try{let d,l,h;if([n,d]=await Promise.all([n||r.createQrEngine(),r._loadImage(e)]),[i,l]=r._drawToCanvas(d,s,i,a),n instanceof Worker){let e=n;t||r._postWorkerMessageSync(e,"inversionMode","both"),h=await new Promise((t,n)=>{let a,o,c,d=-1;o=i=>{i.data.id===d&&(e.removeEventListener("message",o),e.removeEventListener("error",c),clearTimeout(a),null!==i.data.data?t({data:i.data.data,cornerPoints:r._convertPoints(i.data.cornerPoints,s)}):n(r.NO_QR_CODE_FOUND))},c=t=>{e.removeEventListener("message",o),e.removeEventListener("error",c),clearTimeout(a),n("Scanner error: "+(t?t.message||t:"Unknown Error"))},e.addEventListener("message",o),e.addEventListener("error",c),a=setTimeout(()=>c("timeout"),1e4);let h=l.getImageData(0,0,i.width,i.height);d=r._postWorkerMessageSync(e,"decode",h,[h.data.buffer])})}else h=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[t]=await n.detect(i);if(!t)throw r.NO_QR_CODE_FOUND;return{data:t.rawValue,cornerPoints:r._convertPoints(t.cornerPoints,s)}}catch(c){if(t=c.message||c,/not implemented|service unavailable/.test(t))return r._disableBarcodeDetector=!0,r.scanImage(e,{scanRegion:s,canvas:i,disallowCanvasResizing:a,alsoTryWithoutScanRegion:o});throw"Scanner error: "+t}})()]);return c?h:h.data}catch(d){if(!s||!o)throw d;let t=await r.scanImage(e,{qrEngine:n,canvas:i,disallowCanvasResizing:a});return c?t:t.data}finally{t||r._postWorkerMessage(n,"close")}}setGrayscaleWeights(e,t,n,i=!0){r._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:n,useIntegerApproximation:i})}setInversionMode(e){r._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){return e&&console.warn("Specifying a worker path is not required and not supported anymore."),!r._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):n.e("chunk-2d0dea77").then(n.bind(null,"8724")).then(e=>e.createWorker())}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,n=e.videoHeight,i=e.offsetWidth,a=e.offsetHeight,r=e.offsetLeft,o=e.offsetTop,s=window.getComputedStyle(e),c=s.objectFit,d=t/n,l=i/a;switch(c){case"none":var h=t,u=n;break;case"fill":h=i,u=a;break;default:("cover"===c?d>l:d<l)?(u=a,h=u*d):(h=i,u=h/d),"scale-down"===c&&(h=Math.min(h,t),u=Math.min(u,n))}var[g,p]=s.objectPosition.split(" ").map((e,t)=>{const n=parseFloat(e);return e.endsWith("%")?(t?a-u:i-h)*n/100:n});s=this._scanRegion.width||t,l=this._scanRegion.height||n,c=this._scanRegion.x||0;var f=this._scanRegion.y||0;d=this.$overlay.style,d.width=s/t*h+"px",d.height=l/n*u+"px",d.top=o+p+f/n*u+"px",n=/scaleX\(-1\)/.test(e.style.transform),d.left=r+(n?i-g-h:g)+(n?t-c-s:c)/t*h+"px",d.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let n=t.x||0,i=t.y||0,a=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let r of e)r.x=r.x*a+n,r.y=r.y*t+i;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(n=>setTimeout(n,t-e)),this._lastScanTimestamp=Date.now();try{var n=await r.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!r._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=r.createQrEngine()),n?(this._onDecode?this._onDecode(n):this._legacyOnDecode&&this._legacyOnDecode(n.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",(this._scanRegion.x||0)+" "+(this._scanRegion.y||0)+" "+(this._scanRegion.width||this.$video.videoWidth)+" "+(this._scanRegion.height||this.$video.videoHeight)),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",n.cornerPoints.map(({x:e,y:t})=>`${e},${t}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==r.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],n=t.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}}));for(let a of[...n,...t])try{let e=await navigator.mediaDevices.getUserMedia({video:a,audio:!1}),t=this._getFacingMode(e)||(a.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment");return{stream:e,facingMode:t}}catch(i){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,n,i=!1){n=n||document.createElement("canvas");let a=t&&t.x?t.x:0,r=t&&t.y?t.y:0,o=t&&t.width?t.width:e.videoWidth||e.width,s=t&&t.height?t.height:e.videoHeight||e.height;return i||(i=t&&t.downScaledWidth?t.downScaledWidth:o,t=t&&t.downScaledHeight?t.downScaledHeight:s,n.width!==i&&(n.width=i),n.height!==t&&(n.height=t)),t=n.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,a,r,o,s,0,0,n.width,n.height),[n,t]}static async _loadImage(e){if(e instanceof Image)return await r._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"===typeof e))throw"Unsupported image type.";{let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await r._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((t,n)=>{let i=a=>{e.removeEventListener("load",i),e.removeEventListener("error",i),a instanceof ErrorEvent?n("Image load error"):t()};e.addEventListener("load",i),e.addEventListener("error",i)})}static async _postWorkerMessage(e,t,n,i){return r._postWorkerMessageSync(await e,t,n,i)}static _postWorkerMessageSync(e,t,n,i){if(!(e instanceof Worker))return-1;let a=r._workerMessageId++;return e.postMessage({id:a,type:t,data:n},i),a}}r.DEFAULT_CANVAS_SIZE=400,r.NO_QR_CODE_FOUND="No QR code found",r._disableBarcodeDetector=!1,r._workerMessageId=0;var o,s=r;(function(e){e[e["QR_CODE"]=0]="QR_CODE",e[e["AZTEC"]=1]="AZTEC",e[e["CODABAR"]=2]="CODABAR",e[e["CODE_39"]=3]="CODE_39",e[e["CODE_93"]=4]="CODE_93",e[e["CODE_128"]=5]="CODE_128",e[e["DATA_MATRIX"]=6]="DATA_MATRIX",e[e["MAXICODE"]=7]="MAXICODE",e[e["ITF"]=8]="ITF",e[e["EAN_13"]=9]="EAN_13",e[e["EAN_8"]=10]="EAN_8",e[e["PDF_417"]=11]="PDF_417",e[e["RSS_14"]=12]="RSS_14",e[e["RSS_EXPANDED"]=13]="RSS_EXPANDED",e[e["UPC_A"]=14]="UPC_A",e[e["UPC_E"]=15]="UPC_E",e[e["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(o||(o={}));var c,d,l=new Map([[o.QR_CODE,"QR_CODE"],[o.AZTEC,"AZTEC"],[o.CODABAR,"CODABAR"],[o.CODE_39,"CODE_39"],[o.CODE_93,"CODE_93"],[o.CODE_128,"CODE_128"],[o.DATA_MATRIX,"DATA_MATRIX"],[o.MAXICODE,"MAXICODE"],[o.ITF,"ITF"],[o.EAN_13,"EAN_13"],[o.EAN_8,"EAN_8"],[o.PDF_417,"PDF_417"],[o.RSS_14,"RSS_14"],[o.RSS_EXPANDED,"RSS_EXPANDED"],[o.UPC_A,"UPC_A"],[o.UPC_E,"UPC_E"],[o.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function h(e){return Object.values(o).includes(e)}(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["URL"]=1]="URL"})(c||(c={})),function(e){e[e["SCAN_TYPE_CAMERA"]=0]="SCAN_TYPE_CAMERA",e[e["SCAN_TYPE_FILE"]=1]="SCAN_TYPE_FILE"}(d||(d={}));var u,g=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[d.SCAN_TYPE_CAMERA,d.SCAN_TYPE_FILE],e}(),p=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!l.has(t))throw t+" not in html5QrcodeSupportedFormatsTextMap";return new e(t,l.get(t))},e}(),f=function(){function e(){}return e.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();(function(e){e[e["UNKWOWN_ERROR"]=0]="UNKWOWN_ERROR",e[e["IMPLEMENTATION_ERROR"]=1]="IMPLEMENTATION_ERROR",e[e["NO_CODE_FOUND_ERROR"]=2]="NO_CODE_FOUND_ERROR"})(u||(u={}));var m=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:u.UNKWOWN_ERROR}},e}(),y=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function S(e){return"undefined"===typeof e||null===e}var M,v=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = "+e},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = "+e},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e}(),T=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: "+e},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e}(),E=function(){function e(){}return e.builtUsing=function(){return"Built using "},e.reportIssues=function(){return"Report issues"},e}(),I=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the object passed is of type "+n+".",!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),r=Object.keys(e),o=0,s=r;o<s.length;o++){var c=s[o];if(a.has(c))return t.logError(c+" is not supported videoConstaints.",!0),!1}return!0},e}(),C=n("f3a6"),D=function(){function e(e,t,n){if(this.formatMap=new Map([[o.QR_CODE,C["BarcodeFormat"].QR_CODE],[o.AZTEC,C["BarcodeFormat"].AZTEC],[o.CODABAR,C["BarcodeFormat"].CODABAR],[o.CODE_39,C["BarcodeFormat"].CODE_39],[o.CODE_93,C["BarcodeFormat"].CODE_93],[o.CODE_128,C["BarcodeFormat"].CODE_128],[o.DATA_MATRIX,C["BarcodeFormat"].DATA_MATRIX],[o.MAXICODE,C["BarcodeFormat"].MAXICODE],[o.ITF,C["BarcodeFormat"].ITF],[o.EAN_13,C["BarcodeFormat"].EAN_13],[o.EAN_8,C["BarcodeFormat"].EAN_8],[o.PDF_417,C["BarcodeFormat"].PDF_417],[o.RSS_14,C["BarcodeFormat"].RSS_14],[o.RSS_EXPANDED,C["BarcodeFormat"].RSS_EXPANDED],[o.UPC_A,C["BarcodeFormat"].UPC_A],[o.UPC_E,C["BarcodeFormat"].UPC_E],[o.UPC_EAN_EXTENSION,C["BarcodeFormat"].UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!C)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var i=this.createZXingFormats(e),a=new Map;a.set(C["DecodeHintType"].POSSIBLE_FORMATS,i),this.hints=a}return e.prototype.decodeAsync=function(e){var t=this;return new Promise((function(n,i){try{n(t.decode(e))}catch(a){i(a)}}))},e.prototype.decode=function(e){var t=new C["MultiFormatReader"](this.verbose,this.hints),n=new C["HTMLCanvasElementLuminanceSource"](e),i=new C["BinaryBitmap"](new C["HybridBinarizer"](n)),a=t.decode(i);return{text:a.text,format:p.create(this.toHtml5QrcodeSupportedFormats(a.format))}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,i){e.set(t,n)})),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have "+e;return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.logError(a+" is not supported byZXingHtml5QrcodeShim")}return t},e}(),A=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function o(e){try{c(i.next(e))}catch(t){r(t)}}function s(e){try{c(i["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):a(e.value).then(o,s)}c((i=i.apply(e,t||[])).next())}))},w=function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,i&&(a=2&r[0]?i["return"]:r[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},N=function(){function e(t,n,i){if(this.formatMap=new Map([[o.QR_CODE,"qr_code"],[o.AZTEC,"aztec"],[o.CODABAR,"codabar"],[o.CODE_39,"code_39"],[o.CODE_93,"code_93"],[o.CODE_128,"code_128"],[o.DATA_MATRIX,"data_matrix"],[o.ITF,"itf"],[o.EAN_13,"ean_13"],[o.EAN_8,"ean_8"],[o.PDF_417,"pdf417"],[o.UPC_A,"upc_a"],[o.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return"undefined"!==typeof e},e.prototype.decodeAsync=function(e){return A(this,void 0,void 0,(function(){var t,n;return w(this,(function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=i.sent(),!t||0===t.length)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(t),[2,{text:n.rawValue,format:p.create(this.toHtml5QrcodeSupportedFormats(n.format))}]}}))}))},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,i=0,a=e;i<a.length;i++){var r=a[i],o=r.boundingBox.width*r.boundingBox.height;o>n&&(n=o,t=r)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.warn(a+" is not supported byBarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have "+e;return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,i){e.set(t,n)})),e},e}(),_=function(){function e(e,t,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.verbose=t,!0===i.useBarCodeDetectorIfSupported&&N.isSupported()?this.decoder=new N(e,t,n):this.decoder=new D(e,t,n)}return e.prototype.decodeAsync=function(e){var t=this,n=performance.now();return this.decoder.decodeAsync(e).finally((function(){if(t.verbose){var e=performance.now()-n;t.executionResults.push(e),t.executions++,t.possiblyFlushPerformanceReport()}}))},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){var i=n[t];e+=i}var a=e/this.executionResults.length;console.log(a+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},e}(),L=function(){function e(){}return e.createExperimentalFeaturesConfig=function(e){return e?(!0!==e.useBarCodeDetectorIfSupported&&(e.useBarCodeDetectorIfSupported=!1),e):{useBarCodeDetectorIfSupported:!1}},e}();(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["NOT_STARTED"]=1]="NOT_STARTED",e[e["SCANNING"]=2]="SCANNING",e[e["PAUSED"]=3]="PAUSED"})(M||(M={}));var b,O=function(){function e(){this.state=M.NOT_STARTED,this.onGoingTransactionNewState=M.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===M.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=M.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===M.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=M.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==M.UNKNOWN)throw"Cannnot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case M.UNKNOWN:throw"Transition from unknown is not allowed";case M.NOT_STARTED:this.failIfNewStateIs(e,[M.PAUSED]);break;case M.SCANNING:break;case M.PAUSED:break}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,i=t;n<i.length;n++){var a=i[n];if(e===a)throw"Cannot transition from "+this.state+" to "+e}},e}(),x=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===M.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==M.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===M.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===M.PAUSED},e}(),j=function(){function e(){}return e.create=function(){return new x(new O)},e}(),R=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(g),z=function(){function e(e,t){this.logger=t,this.fps=U.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=U.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?I.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!S(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),P=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.videoElement=null,this.localMediaStream=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id="+e+" not found";var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(this.verbose=!0===t.verbose,n=t.experimentalFeatures),this.logger=new y(this.verbose),this.qrcode=new _(this.getSupportedFormats(t),this.verbose,this.logger,L.createExperimentalFeaturesConfig(n)),this.foreverScanTimeout,this.localMediaStream,this.shouldScan=!0,this.stateManagerProxy=j.create()}return e.prototype.start=function(e,t,n,i){if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i||(i=this.verbose?this.logger.log:function(){});var a=z.create(t,this.logger);this.clearElement();var r=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?r=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var o=r,s=(a.isShadedBoxEnabled(),document.getElementById(this.elementId)),c=s.clientWidth?s.clientWidth:U.DEFAULT_WIDTH;s.style.position="relative",this.shouldScan=!0,this.element=s;var d=this,l=this.stateManagerProxy.startTransition(M.SCANNING);return new Promise((function(t,r){var s=o?a.videoConstraints:d.createVideoConstraints(e);if(!s)return l.cancel(),void r("videoConstraints should be defined");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:s}).then((function(e){d.onMediaStreamReceived(e,a,o,c,n,i).then((function(e){l.execute(),d.isScanning=!0,t(null)})).catch((function(e){l.cancel(),r(e)}))})).catch((function(e){l.cancel(),r(v.errorGettingUserMedia(e))})):(l.cancel(),r(v.cameraStreamingNotSupported()))}))},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(M.PAUSED),this.showPausedState(),(S(e)||!0!==e)&&(e=!1),e&&this.videoElement&&this.videoElement.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.videoElement)throw"VideoElement doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(M.SCANNING),e.hidePausedState()},n=this.videoElement.paused;if(n){var i=function(){var n;setTimeout(t,200),null===(n=e.videoElement)||void 0===n||n.removeEventListener("playing",i)};this.videoElement.addEventListener("playing",i),this.videoElement.play()}else t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(M.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var t=document.getElementById(U.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}};return new Promise((function(i,a){var r=function(){e.localMediaStream=null,e.element&&(e.element.removeChild(e.videoElement),e.element.removeChild(e.canvasElement)),n(),e.qrRegion&&(e.qrRegion=null),e.context&&(e.context=null),t.execute(),e.hidePausedState(),e.isScanning=!1,i()};e.localMediaStream||r();var o=e.localMediaStream.getVideoTracks().length,s=0;e.localMediaStream.getVideoTracks().forEach((function(t){e.localMediaStream.removeTrack(t),t.stop(),++s,s>=o&&r()}))}))},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then((function(e){return e.decodedText}))},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(S(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(i,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var r=new Image;r.onload=function(){var e=r.width,o=r.height,s=document.getElementById(n.elementId),c=s.clientWidth?s.clientWidth:U.DEFAULT_WIDTH,d=Math.max(s.clientHeight?s.clientHeight:o,U.FILE_SCAN_MIN_HEIGHT),l=n.computeCanvasDrawConfig(e,o,c,d);if(t){var h=n.createCanvasElement(c,d,"qr-canvas-visible");h.style.display="inline-block",s.appendChild(h);var u=h.getContext("2d");if(!u)throw"Unable to get 2d context from canvas";u.canvas.width=c,u.canvas.height=d,u.drawImage(r,0,0,e,o,l.x,l.y,l.width,l.height)}var g=n.createCanvasElement(l.width,l.height);s.appendChild(g);var p=g.getContext("2d");if(!p)throw"Unable to get 2d context from canvas";p.canvas.width=l.width,p.canvas.height=l.height,p.drawImage(r,0,0,e,o,0,0,l.width,l.height);try{n.qrcode.decodeAsync(g).then((function(e){i(f.createFromQrcodeResult(e))})).catch(a)}catch(m){a("QR code parse error, error = "+m)}},r.onerror=a,r.onabort=a,r.onstalled=a,r.onsuspend=a,r.src=URL.createObjectURL(e)}))},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;if(MediaStreamTrack&&t.getSources)return e.getCamerasFromMediaStreamTrack();var n=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},i=v.unableToQuerySupportedDevices();return n()||(i=v.insecureContextCameraQueryError()),Promise.reject(i)},e.prototype.getRunningTrackCapabilities=function(){if(null==this.localMediaStream)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";if(0===this.localMediaStream.getVideoTracks().length)throw"No video tracks found";var e=this.localMediaStream.getVideoTracks()[0];return e.getCapabilities()},e.prototype.applyVideoConstraints=function(e){var t=this;if(!e)throw"videoConstaints is required argument.";if(!I.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";if(null===this.localMediaStream)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";if(0===this.localMediaStream.getVideoTracks().length)throw"No video tracks found";return new Promise((function(n,i){if("aspectRatio"in e)i("Chaning 'aspectRatio' in run-time is not yet supported.");else{var a=t.localMediaStream.getVideoTracks()[0];a.applyConstraints(e).then((function(e){n(e)})).catch((function(e){i(e)}))}}))},e.getCamerasFromMediaDevices=function(){return new Promise((function(e,t){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(n){var i=function(e){for(var t=e.getVideoTracks(),n=0,i=t;n<i.length;n++){var a=i[n];a.enabled=!1,a.stop(),e.removeTrack(a)}};navigator.mediaDevices.enumerateDevices().then((function(t){for(var a=[],r=0,o=t;r<o.length;r++){var s=o[r];"videoinput"===s.kind&&a.push({id:s.deviceId,label:s.label})}i(n),e(a)})).catch((function(e){t(e.name+" : "+e.message)}))})).catch((function(e){t(e.name+" : "+e.message)}))}))},e.getCamerasFromMediaStreamTrack=function(){return new Promise((function(e,t){var n=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var r=a[i];"video"===r.kind&&n.push({id:r.id,label:r.label})}e(n)},i=MediaStreamTrack;i.getSources(n)}))},e.prototype.getSupportedFormats=function(e){var t=[o.QR_CODE,o.AZTEC,o.CODABAR,o.CODE_39,o.CODE_93,o.CODE_128,o.DATA_MATRIX,o.MAXICODE,o.ITF,o.EAN_13,o.EAN_8,o.PDF_417,o.RSS_14,o.RSS_EXPANDED,o.UPC_A,o.UPC_E,o.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,a=e.formatsToSupport;i<a.length;i++){var r=a[i];h(r)?n.push(r):this.logger.warn("Invalid format: "+r+" passed in config, ignoring.")}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.validateQrboxSize=function(e,t,n){var i=this,a=n.qrbox;this.validateQrboxConfig(a);var r=this.toQrdimensions(e,t,a),o=function(e){if(e<U.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is "+U.MIN_QR_BOX_SIZE+"px."},s=function(t){return t>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),t=e),t};o(r.width),o(r.height),r.width=s(r.width)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var i=S(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,t,i);a.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var r=n.isShadedBoxEnabled()&&a.height<=t,o={x:0,y:0,width:e,height:t},s=r?this.getShadedRegionBounds(e,t,a):o,c=this.createCanvasElement(s.width,s.height),d=c.getContext("2d");d.canvas.width=s.width,d.canvas.height=s.height,this.element.append(c),r&&this.possiblyInsertShadingElement(this.element,e,t,a),this.createScannerPausedUiElement(this.element),this.qrRegion=s,this.context=d,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText="Scanner paused",t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="yellow",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(t){return e(t.text,f.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0})).catch((function(e){n.possiblyUpdateShaders(!1);var i=v.codeParseError(e);return t(i,m.createFrom(i)),!1}))},e.prototype.foreverScan=function(e,t,n){var i=this;if(this.shouldScan&&this.localMediaStream){var a=this.videoElement,r=a.videoWidth/a.clientWidth,o=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*r,c=this.qrRegion.height*o,d=this.qrRegion.x*r,l=this.qrRegion.y*o;this.context.drawImage(a,d,l,s,c,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){i.foreverScanTimeout=setTimeout((function(){i.foreverScan(e,t,n)}),i.getTimeoutFps(e.fps))};this.scanContext(t,n).then((function(a){a||!0===e.disableFlip?h():(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,n).finally((function(){h()})))})).catch((function(e){i.logger.logError("Error happend while scanning context",e),h()}))}},e.prototype.onMediaStreamReceived=function(e,t,n,i,a,r){var o=this,s=this;return new Promise((function(c,d){var l=function(){var n=o.createVideoElement(i);s.element.append(n),n.onabort=d,n.onerror=d;var l=function(){var e=n.clientWidth,i=n.clientHeight;s.setupUi(e,i,t),s.foreverScan(t,a,r),n.removeEventListener("playing",l),c(null)};n.addEventListener("playing",l),n.srcObject=e,n.play(),s.videoElement=n};if(s.localMediaStream=e,n||!t.aspectRatio)l();else{var h={aspectRatio:t.aspectRatio},u=e.getVideoTracks()[0];u.applyConstraints(h).then((function(e){return l()})).catch((function(e){s.logger.logErrors(["[Html5Qrcode] Constriants could not be satisfied, ignoring constraints",e]),l()}))}}))},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",i={user:!0,environment:!0},a="exact",r=function(e){if(e in i)return!0;throw"config has invalid 'facingMode' value = '"+e+"'"},o=Object.keys(e);if(1!==o.length)throw"'cameraIdOrConfig' object should have exactly 1 key, if passed as an object, found "+o.length+" keys";var s=Object.keys(e)[0];if(s!==t&&s!==n)throw"Only '"+t+"' and '"+n+"'  are supported for 'cameraIdOrConfig'";if(s!==t){var c=e.deviceId;if("string"==typeof c)return{deviceId:c};if("object"==typeof c){if(a in c)return{deviceId:{exact:c[""+a]}};throw"'deviceId' should be string or object with "+a+" as key."}var d=typeof c;throw"Invalid type of 'deviceId' = "+d}var l=e.facingMode;if("string"==typeof l){if(r(l))return{facingMode:l}}else{if("object"!=typeof l){var h=typeof l;throw"Invalid type of 'facingMode' = "+h}if(!(a in l))throw"'facingMode' should be string or object with "+a+" as key.";if(r(l[""+a]))return{facingMode:{exact:l[""+a]}}}}var u=typeof e;throw"Invalid type of 'cameraIdOrConfig' = "+u},e.prototype.computeCanvasDrawConfig=function(e,t,n,i){if(e<=n&&t<=i){var a=(n-e)/2,r=(i-t)/2;return{x:a,y:r,width:e,height:t}}var o=e,s=t;return e>n&&(t*=n/e,e=n),t>i&&(e*=i/t,t=i),this.logger.log("Image downsampled from "+o+"X"+s+" to "+e+"X"+t+"."),this.computeCanvasDrawConfig(e,t,n,i)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width=e+"px",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(t){t.style.backgroundColor=e?U.BORDER_SHADER_MATCH_COLOR:U.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var i=e,a=t,r=document.createElement("canvas");return r.style.width=i+"px",r.style.height=a+"px",r.style.display="none",r.id=S(n)?"qr-canvas":n,r},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,i){if(!(t-i.width<1||n-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var r=(t-i.width)/2,o=(n-i.height)/2;if(a.style.borderLeft=r+"px solid #0000007a",a.style.borderRight=r+"px solid #0000007a",a.style.borderTop=o+"px solid #0000007a",a.style.borderBottom=o+"px solid #0000007a",a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id=""+U.SHADED_REGION_ELEMENT_ID,t-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var s=5,c=40;this.insertShaderBorders(a,c,s,-s,0,!0),this.insertShaderBorders(a,c,s,-s,0,!1),this.insertShaderBorders(a,c,s,i.height+s,0,!0),this.insertShaderBorders(a,c,s,i.height+s,0,!1),this.insertShaderBorders(a,s,c+s,-s,-s,!0),this.insertShaderBorders(a,s,c+s,i.height+s-c,-s,!0),this.insertShaderBorders(a,s,c+s,-s,-s,!1),this.insertShaderBorders(a,s,c+s,i.height+s-c,-s,!1),this.hasBorderShaders=!0}e.append(a)}},e.prototype.insertShaderBorders=function(e,t,n,i,a,r){var o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor=U.BORDER_SHADER_DEFAULT_COLOR,o.style.width=t+"px",o.style.height=n+"px",o.style.top=i+"px",r?o.style.left=a+"px":o.style.right=a+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(o),e.appendChild(o)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),F="data:image/svg+xml;base64,",k=F+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",B=F+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Q=F+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",H=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),W=function(){function e(){this.data=H.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=H.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),q=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid silver",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(248 248 248)",this.infoDiv.innerText=E.builtUsing();var t=document.createElement("a");t.innerText="html5-qrcode",t.href="https://github.com/mebjas/html5-qrcode",t.target="new",this.infoDiv.appendChild(t);var n=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(i);var a=document.createElement("a");a.innerText=E.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),V=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Q,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Y,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Q,this.infoIcon.style.opacity="0.6")},e}(),$=function(){function e(){var e=this;this.infoDiv=new q,this.infoIcon=new V((function(){e.infoDiv.show()}),(function(){e.infoDiv.hide()}))}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),G=function(){function e(){}return e.hasCameraPermissions=function(){return new Promise((function(e,t){navigator.mediaDevices.enumerateDevices().then((function(t){t.forEach((function(t){"videoinput"===t.kind&&t.label&&e(!0)})),e(!1)}))}))},e}(),X=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(e){return e===d.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===d.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return g.DEFAULT_SUPPORTED_SCAN_TYPE;var t=g.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max "+t+" values expected for supportedScanTypes";for(var n=0,i=e;n<i.length;n++){var a=i[n];if(!g.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type "+a}return e},e}();function Z(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function J(e,t){return{formatsToSupport:e.formatsToSupport,experimentalFeatures:e.experimentalFeatures,verbose:t}}(function(e){e[e["STATUS_DEFAULT"]=0]="STATUS_DEFAULT",e[e["STATUS_SUCCESS"]=1]="STATUS_SUCCESS",e[e["STATUS_WARNING"]=2]="STATUS_WARNING",e[e["STATUS_REQUESTING_PERMISSION"]=3]="STATUS_REQUESTING_PERMISSION"})(b||(b={}));(function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id="+e+" not found";this.scanTypeSelector=new X(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new y(this.verbose),this.persistedDataManager=new W,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,i){if(e)e(t,i);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(T.lastMatch(t),b.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id="+this.elementId+" not found";i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new P(this.getScanRegionId(),J(this.config,this.verbose))},e.prototype.pause=function(e){if(!this.html5Qrcode)throw"Code scanner not initialized.";(S(e)||!0!==e)&&(e=!1),this.html5Qrcode.pause(e)},e.prototype.resume=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";this.html5Qrcode.resume()},e.prototype.getState=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode.getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise((function(n,i){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then((function(i){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()})).catch((function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),i(t)})):(e.html5Qrcode.clear(),t()):n()})):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode.getRunningTrackCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode.applyVideoConstraints(e)},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=g.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!g.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=g.DEFAULT_REMEMBER_LAST_CAMERA_USED),e):{fps:g.SCAN_DEFAULT_FPS,rememberLastUsedCamera:g.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:g.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),X.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),a=this.getDashboardId();i.id=a,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var n=new $;n.renderInto(t);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",t.appendChild(i)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var i=this;i.setHeaderMessage(T.cameraPermissionRequesting());var a=function(){n||i.createPermissionButton(e,t)};P.getCameras().then((function(n){i.persistedDataManager.setHasPermission(!0),i.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),i.renderCameraSelection(n)):(i.setHeaderMessage(T.noCameraFound(),b.STATUS_WARNING),a())})).catch((function(e){i.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:a(),i.setHeaderMessage(e,b.STATUS_WARNING)}))},e.prototype.createPermissionButton=function(e,t){var n=this,i=document.createElement("button");i.id=this.getCameraPermissionButtonId(),i.innerText=T.cameraPermissionTitle(),i.addEventListener("click",(function(){i.disabled=!0,n.createCameraListUi(e,t,i)})),t.appendChild(i)},e.prototype.createPermissionsUi=function(e,t){var n=this;X.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?G.hasCameraPermissions().then((function(i){i?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))})).catch((function(i){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)})):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=X.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var i=document.createElement("div");i.style.textAlign="center",n.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,i),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=this,n=document.createElement("div");n.id=this.getDashboardSectionFileScanRegionId(),n.style.textAlign="center",n.style.display=X.isCameraScanType(this.currentScanType)?"none":"block",e.appendChild(n);var i=document.createElement("input");i.id=this.getFileScanInputId(),i.accept="image/*",i.type="file",i.style.width="200px",i.disabled=X.isCameraScanType(this.currentScanType);var a=document.createElement("span");a.innerText=" Select Image",n.appendChild(i),n.appendChild(a),i.addEventListener("change",(function(e){if(!t.html5Qrcode)throw"html5Qrcode not defined";if(null!=e&&null!=e.target&&X.isFileScanType(t.currentScanType)&&0!==e.target.files.length){var n=e.target.files[0];t.html5Qrcode.scanFileV2(n,!0).then((function(e){t.resetHeaderMessage(),t.qrCodeSuccessCallback(e.decodedText,e)})).catch((function(e){t.setHeaderMessage(e,b.STATUS_WARNING),t.qrCodeErrorCallback(e,m.createFrom(e))}))}}))},e.prototype.renderCameraSelection=function(e){var t=this,n=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var a=document.createElement("span");a.style.marginRight="10px";var r=e.length,o=document.createElement("select");if(1===r)o.style.display="none";else{var s=T.selectCamera();a.innerText=s+" ("+e.length+")  "}o.id=this.getCameraSelectionId();for(var c=[],d=0,l=e;d<l.length;d++){var h=l[d],u=h.id,g=null==h.label?u:h.label,p=document.createElement("option");p.value=u,p.innerText=g,c.push(p),o.appendChild(p)}a.appendChild(o),i.appendChild(a);var f=document.createElement("span"),m=document.createElement("button");m.innerText=T.scanButtonStartScanningText(),f.appendChild(m);var y=document.createElement("button");y.innerText=T.scanButtonStopScanningText(),y.style.display="none",y.disabled=!0,f.appendChild(y),i.appendChild(f);var S=function(e){e||(m.style.display="none"),m.innerText=T.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,e&&(m.style.display="inline-block")};if(m.addEventListener("click",(function(e){m.innerText=T.scanButtonScanningStarting(),o.disabled=!0,m.disabled=!0,m.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var i=o.value;n.persistedDataManager.setLastUsedCameraId(i),n.html5Qrcode.start(i,Z(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then((function(e){y.disabled=!1,y.style.display="inline-block",S(!1)})).catch((function(e){n.showHideScanTypeSwapLink(!0),o.disabled=!1,S(!0),n.setHeaderMessage(e,b.STATUS_WARNING)}))})),1===r&&m.click(),y.addEventListener("click",(function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";y.disabled=!0,n.html5Qrcode.stop().then((function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),o.disabled=!1,m.disabled=!1,y.style.display="none",m.style.display="inline-block",n.insertCameraScanImageToScanRegion()})).catch((function(e){y.disabled=!1,n.setHeaderMessage(e,b.STATUS_WARNING)}))})),n.persistedDataManager.getLastUsedCameraId()){for(var M=n.persistedDataManager.getLastUsedCameraId(),v=!1,E=0,I=c;E<I.length;E++){p=I[E];if(p.value===M){v=!0;break}}v?(o.value=M,m.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=T.textIfCameraScanSelected(),n=T.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var r=document.createElement("a");r.style.textDecoration="underline",r.id=this.getDashboardSectionSwapLinkId(),r.innerText=X.isCameraScanType(this.currentScanType)?t:n,r.addEventListener("click",(function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.getFileScanInput().value="",e.sectionSwapAllowed=!1,X.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getFileScanInput().disabled=!1,e.getCameraScanRegion().style.display="none",e.getFileScanRegion().style.display="block",r.innerText=n,e.currentScanType=d.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getFileScanInput().disabled=!0,e.getCameraScanRegion().style.display="block",e.getFileScanRegion().style.display="none",r.innerText=t,e.currentScanType=d.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")})),a.appendChild(r),i.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&G.hasCameraPermissions().then((function(n){if(n){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)})).catch((function(e){t.persistedDataManager.setHasPermission(!1)}))},e.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=b.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case b.STATUS_SUCCESS:n.style.background="#6aaf5042",n.style.color="#477735";break;case b.STATUS_WARNING:n.style.background="#cb243124",n.style.color="#cb2431";break;case b.STATUS_DEFAULT:default:n.style.background="#00000000",n.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(e){!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none"},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=k},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=B},e.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},e.prototype.getDashboardSectionId=function(){return this.elementId+"__dashboard_section"},e.prototype.getDashboardSectionCameraScanRegionId=function(){return this.elementId+"__dashboard_section_csr"},e.prototype.getDashboardSectionFileScanRegionId=function(){return this.elementId+"__dashboard_section_fsr"},e.prototype.getDashboardSectionSwapLinkId=function(){return this.elementId+"__dashboard_section_swaplink"},e.prototype.getScanRegionId=function(){return this.elementId+"__scan_region"},e.prototype.getDashboardId=function(){return this.elementId+"__dashboard"},e.prototype.getFileScanInputId=function(){return this.elementId+"__filescan_input"},e.prototype.getStatusSpanId=function(){return this.elementId+"__status_span"},e.prototype.getHeaderMessageContainerId=function(){return this.elementId+"__header_message"},e.prototype.getCameraSelectionId=function(){return this.elementId+"__camera_selection"},e.prototype.getCameraPermissionButtonId=function(){return this.elementId+"__camera_permission_button"},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getFileScanRegion=function(){return document.getElementById(this.getDashboardSectionFileScanRegionId())},e.prototype.getFileScanInput=function(){return document.getElementById(this.getFileScanInputId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}})(),n("bc3a");var K=n("2f0b"),ee=new K["a"]("ci"),te={data:function(){return{loading:!1,isIos:!1,countIos:0,streamOn:!1}},methods:{scanQR:function(){var e=this,t=this,n=document.getElementById("videoQRCODE");s.scanImage(n).then((function(n){console.log("result",n),n=JSON.parse(n),ee.alert("QR Code!","bg-green-400"),t.$router.push("/absen/gps?type=".concat(e.$route.query.type,"&target=").concat(e.$route.query.target,"&latitude=").concat(n.lat,"&longitude=").concat(n["long"]))}))["catch"]((function(n){t.$router.push("/absen/gps?type=".concat(e.$route.query.type,"&target=").concat(e.$route.query.target,"&latitude=").concat(e.$route.query.latitude,"&longitude=").concat(e.$route.query.longitude)),ee.alert("QR Code!"),console.log(n||"No QR code found.")}))},getStream:function(e){var t=this;if(navigator.mediaDevices||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia){setTimeout((function(){t.loading=!0,t.$forceUpdate()}),2e3);var n={};n[e]=!0,this.getUserMedia(n).then((function(t){var n=document.querySelector(e);"srcObject"in n?n.srcObject=t:navigator.mozGetUserMedia?n.mozSrcObject=t:n.src=(window.URL||window.webkitURL).createObjectURL(t),n.play()}))["catch"]((function(e){alert("Error: "+e)}))}else alert("User Media API not supported.")},getUserMedia:function(e){var t=this;if(navigator.mediaDevices)return setTimeout((function(){t.checkCamera()}),1500),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return n?new Promise((function(t,i){n.bind(navigator)(e,t,i)})):void 0},checkCamera:function(){P.getCameras().then((function(e){if(console.log("devices",e),e&&e.length)e[0].id}))["catch"]((function(e){}))},startScanner:function(){var e=this,t=this,n=new P("reader"),i=function(i,a){var r=JSON.parse(i);t.$router.push("/absen/gps?type=".concat(e.$route.query.type,"&target=").concat(e.$route.query.target,"&latitude=").concat(r.lat,"&longitude=").concat(r["long"])),n.stop().then((function(e){}))["catch"]((function(e){}))},a={fps:10,qrbox:{width:250,height:250}};n.start({facingMode:"environment"},a,i)}},mounted:function(){this.startScanner(),localStorage.getItem("users")||this.$router.push("/")}},ne=te,ie=n("2877"),ae=Object(ie["a"])(ne,i,a,!1,null,null,null);t["default"]=ae.exports}}]);
//# sourceMappingURL=page-absen-index~31ecd969.24e3da45.js.map